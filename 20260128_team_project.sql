
/*
================================================================================
★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
※ 실행 순서

1. DROP TABLE 모두 실행
2. DROP SEQUENCE 모두 실행
3. TABLE 생성 모두 실행
4. Project_Final.sql 파일에 있는 시퀀스 모두 생성
5. 샘플데이터 모두 생성
6. Project_Final.sql 파일에 있는 프로시저/함수 모두 실행(컴파일)
7. 샘플데이터 모두 삭제
8. 프로시저 데이터 입력 실행
    (이 쪽에 있는 INSERT와 UPDATE 모두 순서대로 실행할 것)
★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
================================================================================
*/


--★ 1. 테이블 삭제 실행--------------------------------------------------------
DROP TABLE GRADE;
DROP TABLE DROP_OUT;
DROP TABLE ENROLLMENT;
DROP TABLE OPEN_SUB;
DROP TABLE OPEN_COURSE;
DROP TABLE ADMIN;
DROP TABLE DROP_REASON;
DROP TABLE ADMIN_ROLE;
DROP TABLE CLASS;
DROP TABLE TEXTBOOK;
DROP TABLE SUB;
DROP TABLE COURSE;
DROP TABLE STUD;
DROP TABLE PROF;
--------------------------------------------------------------------------------

--★ 2. 시퀀스 삭제 실행--------------------------------------------------------
DROP SEQUENCE PROF_SEQ;
DROP SEQUENCE OC_SEQ;
DROP SEQUENCE ER_SEQ;
DROP SEQUENCE SEQ_ADMIN;
DROP SEQUENCE ST_SEQ;
DROP SEQUENCE SEQ_OPEN_SUB;
DROP SEQUENCE SEQ_DROPOUT;
DROP SEQUENCE GR_SEQ;
--------------------------------------------------------------------------------


--★ 3. 테이블 생성 실행 -------------------------------------------------------
--○ 테이블 생성
-- 테이블 생성
-- 테이블명: PROF
CREATE TABLE PROF
( PF_ID     VARCHAR2(20)      
, PF_NAME   VARCHAR2(20)    CONSTRAINT  PF_PF_NAME_NN  NOT NULL
, PF_SSN    VARCHAR2(14)        CONSTRAINT  PF_PF_SSN_NN   NOT NULL
, PF_PW     VARCHAR2(20)    CONSTRAINT  PF_PF_PW_NN    NOT NULL
, PF_DATE   DATE            DEFAULT SYSDATE    CONSTRAINT  PF_PF_DATE_NN  NOT NULL
, CONSTRAINT PF_PF_ID_PK PRIMARY KEY(PF_ID)
, CONSTRAINT PF_PF_SSN_UK UNIQUE(PF_SSN)
, CONSTRAINT PF_PF_PW_CK CHECK (LENGTH(PF_PW) BETWEEN 7 AND 12)
, CONSTRAINT PF_PF_SSN_CK CHECK (LENGTH(PF_SSN) = 14)
);
--==>> Table PROF이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: STUD
CREATE TABLE STUD
( ST_ID     VARCHAR2(20)
, ST_PW     VARCHAR2(20)    CONSTRAINT ST_ST_PW_NN NOT NULL
, ST_NAME   VARCHAR2(20)    CONSTRAINT ST_ST_NAME_NN NOT NULL
, ST_SSN    VARCHAR2(14)    CONSTRAINT ST_ST_SSN_NN NOT NULL
, ST_DATE   DATE            DEFAULT SYSDATE     CONSTRAINT ST_ST_DATE_NN NOT NULL
, CONSTRAINT ST_ST_ID_PK PRIMARY KEY(ST_ID)
, CONSTRAINT ST_ST_SSN_UK UNIQUE(ST_SSN)
, CONSTRAINT ST_ST_PW_CK CHECK (LENGTH(ST_PW) BETWEEN 7 AND 12)
, CONSTRAINT ST_ST_SSN_CK CHECK (LENGTH(ST_SSN) = 14)
);
--==>> Table STUD이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: COURSE
CREATE TABLE COURSE
( CR_CODE   VARCHAR2(10)    
, CR_NAME   VARCHAR2(100)    CONSTRAINT CR_CR_NAME_NN NOT NULL
, CONSTRAINT CR_CR_CODE_PK PRIMARY KEY(CR_CODE)
);
--==>>Table COURSE이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: SUB
CREATE TABLE SUB
( SUB_CODE  VARCHAR2(10)    
, SUB_NAME  VARCHAR2(100)    CONSTRAINT SUB_SUB_NAME_NN NOT NULL
, CONSTRAINT SUB_SUB_CODE_PK  PRIMARY KEY(SUB_CODE)
);
--==>> Table SUB이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: TEXTBOOK
CREATE TABLE TEXTBOOK
( TB_CODE   VARCHAR2(10)    
, TB_NAME   VARCHAR2(100)    CONSTRAINT TB_TB_NAME_NN  NOT NULL
, CONSTRAINT TB_TB_CODE_PK PRIMARY KEY(TB_CODE)
);
--==>> Table TEXTBOOK이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: CLASS
CREATE TABLE CLASS
( CL_CODE   VARCHAR2(20)
, CL_NAME   VARCHAR2(20)    CONSTRAINT CL_CL_NAME_NN NOT NULL
, CONSTRAINT CL_CL_CODE_PK PRIMARY KEY(CL_CODE)
);
--==>> Table CLASS이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: ADMIN_ROLE
CREATE TABLE ADMIN_ROLE
( AR_CODE   VARCHAR2(10)
, AR_NAME   VARCHAR2(20)    CONSTRAINT AR_AR_NAME_NN NOT NULL
, CONSTRAINT AR_AR_CODE_PK PRIMARY KEY(AR_CODE)
);
--==>> Table ADMIN_ROLE이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: DROP_REASON
CREATE TABLE DROP_REASON
( DR_CODE   VARCHAR2(10)
, DR_REASON VARCHAR2(20)    CONSTRAINT DR_DR_REASON_NN NOT NULL
, CONSTRAINT DR_DR_CODE_PK PRIMARY KEY(DR_CODE)
);
--==>> Table DROP_REASON이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: ADMIN
CREATE TABLE ADMIN
(
  AD_ID      VARCHAR2(20)  CONSTRAINT AD_AD_ID_NN NOT NULL
, AD_PW      VARCHAR2(20)  CONSTRAINT AD_AD_PW_NN NOT NULL    
, AD_NAME    VARCHAR2(20)  CONSTRAINT AD_AD_NAME_NN NOT NULL    
, AD_SSN     VARCHAR2(14)  CONSTRAINT AD_AD_SSN_NN NOT NULL
, AD_DATE    DATE          DEFAULT SYSDATE       CONSTRAINT AD_AD_DATE_NN NOT NULL       
, AR_CODE    VARCHAR2(10)  CONSTRAINT AD_AR_CODE_NN NOT NULL
, CONSTRAINT AD_AD_ID_PK PRIMARY KEY(AD_ID)
, CONSTRAINT AD_AR_CODE_FK FOREIGN KEY(AR_CODE)
            REFERENCES ADMIN_ROLE(AR_CODE)
, CONSTRAINT AD_AD_SSN_UK UNIQUE(AD_SSN)
, CONSTRAINT AD_AD_PW_CK CHECK (LENGTH(AD_PW) BETWEEN 7 AND 12)
, CONSTRAINT AD_AD_SSN_CK CHECK (LENGTH(AD_SSN) = 14)
);
--==>> Table ADMIN이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: OPEN_COURSE
CREATE TABLE OPEN_COURSE
(
 OC_CODE    VARCHAR2(10)  CONSTRAINT OC_OC_CODE_NN NOT NULL  
,CR_CODE    VARCHAR2(10)  CONSTRAINT OC_CR_CODE_NN NOT NULL
,OC_SDATE   DATE          CONSTRAINT OC_OC_SDATE_NN NOT NULL
,OC_EDATE   DATE          CONSTRAINT OC_OC_EDATE_NN NOT NULL
,CL_CODE    VARCHAR2(20)  CONSTRAINT OC_CL_CODE_NN NOT NULL
,OC_DATE    DATE          DEFAULT SYSDATE      CONSTRAINT OC_OC_DATE_NN NOT NULL
,CONSTRAINT OC_OC_CODE_PK PRIMARY KEY(OC_CODE)
,CONSTRAINT OC_CR_CODE_FK FOREIGN KEY(CR_CODE)
            REFERENCES COURSE(CR_CODE)
,CONSTRAINT OC_CL_CODE_FK FOREIGN KEY(CL_CODE)
            REFERENCES CLASS(CL_CODE)
,CONSTRAINT OC_OC_DATE_CK CHECK(OC_SDATE <= OC_EDATE)
);
--==>> Table ADMIN이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: OPEN_SUB
CREATE TABLE OPEN_SUB
(
 OS_CODE    VARCHAR2(10)  CONSTRAINT OS_OS_CODE_NN NOT NULL
,OC_CODE    VARCHAR2(10)  CONSTRAINT OS_OC_CODE_NN NOT NULL   
,PF_ID      VARCHAR2(20)  CONSTRAINT OS_PF_ID_NN NOT NULL
,SUB_CODE   VARCHAR2(10)  CONSTRAINT OS_SUB_CODE_NN NOT NULL  
,OS_SDATE   DATE          CONSTRAINT OS_OS_SDATE_NN NOT NULL    
,OS_EDATE   DATE          CONSTRAINT OS_OS_EDATE_NN NOT NULL    
,TB_CODE    VARCHAR2(10)  CONSTRAINT OS_TB_CODE_NN NOT NULL 
,ATT_WEIGHT NUMBER(3)     
,WRT_WEIGHT NUMBER(3)     
,PRC_WEIGHT NUMBER(3)     
,OS_DATE    DATE          DEFAULT SYSDATE      CONSTRAINT OS_OS_DATE_NN NOT NULL                  
, CONSTRAINT OS_OS_CODE_PK PRIMARY KEY(OS_CODE)
, CONSTRAINT OS_OC_CODE_FK FOREIGN KEY(OC_CODE)
            REFERENCES OPEN_COURSE(OC_CODE)
, CONSTRAINT OS_PF_ID_FK FOREIGN KEY(PF_ID)
            REFERENCES PROF(PF_ID)
, CONSTRAINT OS_SUB_CODE_FK FOREIGN KEY(SUB_CODE)
            REFERENCES SUB(SUB_CODE)
, CONSTRAINT OS_TB_CODE_FK FOREIGN KEY(TB_CODE)
            REFERENCES TEXTBOOK(TB_CODE)
, CONSTRAINT OS_OC_SUB_CUK UNIQUE(OC_CODE,SUB_CODE)
, CONSTRAINT OS_ATT_CK CHECK(ATT_WEIGHT BETWEEN 0 AND 100) 
, CONSTRAINT OS_WRT_CK CHECK(WRT_WEIGHT BETWEEN 0 AND 100)
, CONSTRAINT OS_PRC_CK CHECK(PRC_WEIGHT BETWEEN 0 AND 100)
, CONSTRAINT OS_OS_DATE_CK CHECK(OS_SDATE <= OS_EDATE)
, CONSTRAINT OS_SUM_WEIGHT_CK CHECK(ATT_WEIGHT + WRT_WEIGHT + PRC_WEIGHT = 100)
);
--==>> Table OPEN_SUB이(가) 생성되었습니다.



-- 테이블 생성
-- 테이블명: ENROLLMENT
CREATE TABLE ENROLLMENT
(
 ER_CODE    VARCHAR2(10)    CONSTRAINT ER_ER_CODE_NN NOT NULL
,OC_CODE    VARCHAR2(10)    CONSTRAINT ER_OC_CODE_NN NOT NULL   
,ST_ID      VARCHAR2(20)    CONSTRAINT ER_ST_ID_NN NOT NULL     
,ER_DATE    DATE            DEFAULT SYSDATE       CONSTRAINT ER_ER_DATE_NN NOT NULL
,CONSTRAINT ER_ER_CODE_PK PRIMARY KEY(ER_CODE)
,CONSTRAINT ER_OC_CODE_FK FOREIGN KEY(OC_CODE)
            REFERENCES OPEN_COURSE(OC_CODE)
,CONSTRAINT ER_ST_ID_FK FOREIGN KEY(ST_ID)
            REFERENCES STUD(ST_ID)
,CONSTRAINT ER_OC_ST_CUK UNIQUE(OC_CODE,ST_ID)
);
--==>> Table ENROLLMENT이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: DROP_OUT
CREATE TABLE DROP_OUT
(
 DO_CODE    VARCHAR2(10)    CONSTRAINT DO_OUT_DO_CODE_NN NOT NULL
,ER_CODE    VARCHAR2(10)    CONSTRAINT DO_OUT_ER_CODE_NN NOT NULL   
,DO_DATE    DATE            DEFAULT SYSDATE    CONSTRAINT DO_OUT_DO_DATE_NN NOT NULL
,DR_CODE    VARCHAR2(10)    CONSTRAINT DO_OUT_DR_CODE_NN NOT NULL
,CONSTRAINT DROP_DO_CODE_PK PRIMARY KEY(DO_CODE)
,CONSTRAINT DO_ER_CODE_FK FOREIGN KEY(ER_CODE)
            REFERENCES ENROLLMENT(ER_CODE)
,CONSTRAINT DO_DR_CODE_FK FOREIGN KEY(DR_CODE)
            REFERENCES DROP_REASON(DR_CODE)
, CONSTRAINT DO_ER_CODE_UK UNIQUE(ER_CODE)
);
--==>> Table DROP_OUT이(가) 생성되었습니다.


-- 테이블 생성
-- 테이블명: GRADE
CREATE TABLE GRADE
(
 GR_CODE    VARCHAR2(10)    CONSTRAINT GR_GR_CODE_NN NOT NULL
,ER_CODE    VARCHAR2(10)    CONSTRAINT GR_ER_CODE_NN NOT NULL   
,OS_CODE    VARCHAR2(10)    CONSTRAINT GR_OS_CODE_NN NOT NULL   
,ATT_SCORE  NUMBER(3)       CONSTRAINT GR_ATT_CK CHECK(ATT_SCORE BETWEEN 0 AND 100)
,WRT_SCORE  NUMBER(3)       CONSTRAINT GR_WRT_CK CHECK(WRT_SCORE BETWEEN 0 AND 100)
,PRC_SCORE  NUMBER(3)       CONSTRAINT GR_PRC_CK CHECK(PRC_SCORE BETWEEN 0 AND 100)    
,GR_DATE    DATE            DEFAULT SYSDATE CONSTRAINT GR_GR_DATE_NN NOT NULL
,CONSTRAINT GR_GR_CODE_PK PRIMARY KEY(GR_CODE)
,CONSTRAINT GR_ER_CODE_FK FOREIGN KEY(ER_CODE)
            REFERENCES ENROLLMENT(ER_CODE)
,CONSTRAINT GR_OS_CODE_FK FOREIGN KEY(OS_CODE)
            REFERENCES OPEN_SUB(OS_CODE)
,CONSTRAINT GR_ER_OS_CUK UNIQUE(ER_CODE,OS_CODE)
);
--==>>Table GRADE이(가) 생성되었습니다.

--------------------------------------------------------------------------------


--★ 5. 샘플데이터 모두 생성----------------------------------------------------

--○ 샘플 데이터
INSERT INTO PROF (PF_ID, PF_NAME, PF_SSN, PF_PW, PF_DATE) VALUES ('PF100', '강교수', '660222-1567422', '7654321', TO_DATE('2010-12-01', 'YYYY-MM-DD'));
INSERT INTO PROF (PF_ID, PF_NAME, PF_SSN, PF_PW, PF_DATE) VALUES ('PF101', '김교수', '700333-2933325', '1231234', TO_DATE('2011-01-26', 'YYYY-MM-DD'));

-- 2. STUD (학생)
INSERT INTO STUD (ST_ID, ST_PW, ST_NAME, ST_SSN, ST_DATE) VALUES ('ST111', '1234567', '홍길동', '770126-1234456', TO_DATE('2024-12-01', 'YYYY-MM-DD'));
INSERT INTO STUD (ST_ID, ST_PW, ST_NAME, ST_SSN, ST_DATE) VALUES ('ST112', '2345671', '고윤정', '971208-2345671', TO_DATE('2023-11-08', 'YYYY-MM-DD'));
INSERT INTO STUD (ST_ID, ST_PW, ST_NAME, ST_SSN, ST_DATE) VALUES ('ST113', '3456781', '이선호', '000904-3123456', TO_DATE('2022-11-09', 'YYYY-MM-DD'));

-- 3. COURSE (과정명)
INSERT INTO COURSE (CR_CODE, CR_NAME) VALUES ('CR001', '자바 풀스택');
INSERT INTO COURSE (CR_CODE, CR_NAME) VALUES ('CR002', '프론트엔드');


-- 4. SUB (과목명)
INSERT INTO SUB (SUB_CODE, SUB_NAME) VALUES ('SUB001', '자바');
INSERT INTO SUB (SUB_CODE, SUB_NAME) VALUES ('SUB002', 'SQL');

-- 5. TEXTBOOK (교재)
INSERT INTO TEXTBOOK (TB_CODE, TB_NAME) VALUES ('TB001', '스프링 인 액션');
INSERT INTO TEXTBOOK (TB_CODE, TB_NAME) VALUES ('TB002', '웹 프로그래밍 입문');
INSERT INTO TEXTBOOK (TB_CODE, TB_NAME) VALUES ('TB003', '데이터베이스 입문');
INSERT INTO TEXTBOOK (TB_CODE, TB_NAME) VALUES ('TB004', 'VUE.JS 3');

-- 6. CLASS (강의실)
INSERT INTO CLASS (CL_CODE, CL_NAME) VALUES ('CL001', 'A강의실');
INSERT INTO CLASS (CL_CODE, CL_NAME) VALUES ('CL002', 'B강의실');


-- 7. ADMIN_ROLE (관리자권한)
INSERT INTO ADMIN_ROLE (AR_CODE, AR_NAME) VALUES ('AR001', '최고관리자');
INSERT INTO ADMIN_ROLE (AR_CODE, AR_NAME) VALUES ('AR002', '일반관리자');

-- 8. DROP_REASON (탈락사유)
INSERT INTO DROP_REASON (DR_CODE, DR_REASON) VALUES ('DR001', '개인사정');
INSERT INTO DROP_REASON (DR_CODE, DR_REASON) VALUES ('DR002', '건강악화');
INSERT INTO DROP_REASON (DR_CODE, DR_REASON) VALUES ('DR003', '무단결석');

-- 9. ADMIN (관리자: AR_CODE 참조)
INSERT INTO ADMIN (AD_ID, AD_PW, AD_NAME, AD_SSN, AD_DATE, AR_CODE) 
VALUES ('AD100', '1122333', '김종서', '751010-1122333', TO_DATE('2012-01-26', 'YYYY-MM-DD'), 'AR002');
INSERT INTO ADMIN (AD_ID, AD_PW, AD_NAME, AD_SSN, AD_DATE, AR_CODE) 
VALUES ('AD101', '2777777', '조미숙', '790102-2777777', TO_DATE('2007-12-13', 'YYYY-MM-DD'), 'AR001');
INSERT INTO ADMIN (AD_ID, AD_PW, AD_NAME, AD_SSN, AD_DATE, AR_CODE) 
VALUES ('AD102', '1552147', '이기자', '890810-1552147', TO_DATE('2010-05-14', 'YYYY-MM-DD'), 'AR002');

-- 10. OPEN_COURSE (개설과정: CR_CODE, CL_CODE 참조)
INSERT INTO OPEN_COURSE (OC_CODE, CR_CODE, OC_SDATE, OC_EDATE, CL_CODE, OC_DATE) 
VALUES ('OC001', 'CR001', TO_DATE('2025-11-17', 'YYYY-MM-DD'), TO_DATE('2026-06-15', 'YYYY-MM-DD'), 'CL002', TO_DATE('2025-10-10', 'YYYY-MM-DD'));
INSERT INTO OPEN_COURSE (OC_CODE, CR_CODE, OC_SDATE, OC_EDATE, CL_CODE, OC_DATE) 
VALUES ('OC002', 'CR002', TO_DATE('2026-01-05', 'YYYY-MM-DD'), TO_DATE('2026-06-29', 'YYYY-MM-DD'), 'CL001', TO_DATE('2025-12-15', 'YYYY-MM-DD'));

-- 11. OPEN_SUB (개설과목: OC_CODE, PF_ID, SUB_CODE, TB_CODE 참조)
-- 배점(WEIGHT) 합계 및 CHECK 제약조건 준수
INSERT INTO OPEN_SUB (OS_CODE, OC_CODE, PF_ID, SUB_CODE, OS_SDATE, OS_EDATE, TB_CODE, ATT_WEIGHT, WRT_WEIGHT, PRC_WEIGHT, OS_DATE) 
VALUES ('OS001', 'OC001', 'PF101', 'SUB001', TO_DATE('2025-11-17', 'YYYY-MM-DD'), TO_DATE('2026-02-25', 'YYYY-MM-DD'), 'TB001', 20, 30, 50, TO_DATE('2025-10-10', 'YYYY-MM-DD'));
INSERT INTO OPEN_SUB (OS_CODE, OC_CODE, PF_ID, SUB_CODE, OS_SDATE, OS_EDATE, TB_CODE, ATT_WEIGHT, WRT_WEIGHT, PRC_WEIGHT, OS_DATE) 
VALUES ('OS002', 'OC001', 'PF100', 'SUB002', TO_DATE('2026-02-26', 'YYYY-MM-DD'), TO_DATE('2026-04-15', 'YYYY-MM-DD'), 'TB002', 20, 50, 30, TO_DATE('2025-10-10', 'YYYY-MM-DD'));
INSERT INTO OPEN_SUB (OS_CODE, OC_CODE, PF_ID, SUB_CODE, OS_SDATE, OS_EDATE, TB_CODE, ATT_WEIGHT, WRT_WEIGHT, PRC_WEIGHT, OS_DATE) 
VALUES ('OS003', 'OC002', 'PF100', 'SUB001', TO_DATE('2026-01-05', 'YYYY-MM-DD'), TO_DATE('2026-03-28', 'YYYY-MM-DD'), 'TB002', 30, 30, 40, TO_DATE('2025-12-15', 'YYYY-MM-DD'));
INSERT INTO OPEN_SUB (OS_CODE, OC_CODE, PF_ID, SUB_CODE, OS_SDATE, OS_EDATE, TB_CODE, ATT_WEIGHT, WRT_WEIGHT, PRC_WEIGHT, OS_DATE) 
VALUES ('OS004', 'OC002', 'PF101', 'SUB002', TO_DATE('2026-04-01', 'YYYY-MM-DD'), TO_DATE('2026-06-29', 'YYYY-MM-DD'), 'TB003', NULL, NULL, NULL, TO_DATE('2025-12-16', 'YYYY-MM-DD'));


-- 12. ENROLLMENT (수강신청: OC_CODE, ST_ID 참조)
INSERT INTO ENROLLMENT (ER_CODE, OC_CODE, ST_ID, ER_DATE) VALUES ('ER001', 'OC001', 'ST111', TO_DATE('2025-09-28', 'YYYY-MM-DD'));
INSERT INTO ENROLLMENT (ER_CODE, OC_CODE, ST_ID, ER_DATE) VALUES ('ER002', 'OC002', 'ST112', TO_DATE('2025-10-20', 'YYYY-MM-DD'));
INSERT INTO ENROLLMENT (ER_CODE, OC_CODE, ST_ID, ER_DATE) VALUES ('ER003', 'OC002', 'ST113', TO_DATE('2025-12-29', 'YYYY-MM-DD'));

-- 13. DROP_OUT (중도탈락: ER_CODE, DR_CODE 참조)
INSERT INTO DROP_OUT (DO_CODE, ER_CODE, DO_DATE, DR_CODE) 
VALUES ('DO001', 'ER001', TO_DATE('2025-12-11', 'YYYY-MM-DD'), 'DR001');
INSERT INTO DROP_OUT (DO_CODE, ER_CODE, DO_DATE, DR_CODE) 
VALUES ('DO002', 'ER002', TO_DATE('2026-06-27', 'YYYY-MM-DD'), 'DR002');

-- 14. GRADE (성적: ER_CODE, OS_CODE 참조)
INSERT INTO GRADE (GR_CODE, ER_CODE, OS_CODE, ATT_SCORE, WRT_SCORE, PRC_SCORE, GR_DATE) 
VALUES ('GR001', 'ER002', 'OS003', 80, 70, 60, TO_DATE('2026-03-20', 'YYYY-MM-DD'));
INSERT INTO GRADE (GR_CODE, ER_CODE, OS_CODE, ATT_SCORE, WRT_SCORE, PRC_SCORE, GR_DATE) 
VALUES ('GR002', 'ER002', 'OS004', 75, 57, 45, TO_DATE('2026-06-26', 'YYYY-MM-DD'));


--------------------------------------------------------------------------------


--★ 7. 샘플데이터 모두 삭제 ---------------------------------------------------

--○ 샘플데이터 지우기
DELETE FROM GRADE;
DELETE FROM DROP_OUT;
DELETE FROM ENROLLMENT;
DELETE FROM OPEN_SUB;
DELETE FROM OPEN_COURSE;
DELETE FROM ADMIN;
DELETE FROM DROP_REASON;
DELETE FROM ADMIN_ROLE;
DELETE FROM CLASS;
DELETE FROM TEXTBOOK;
DELETE FROM SUB;
DELETE FROM COURSE;
DELETE FROM STUD;
DELETE FROM PROF;


SELECT * FROM GRADE;
SELECT * FROM DROP_OUT;
SELECT * FROM ENROLLMENT;
SELECT * FROM OPEN_SUB;
SELECT * FROM OPEN_COURSE;
SELECT * FROM ADMIN;
SELECT * FROM DROP_REASON;
SELECT * FROM ADMIN_ROLE;
SELECT * FROM CLASS;
SELECT * FROM TEXTBOOK;
SELECT * FROM SUB;
SELECT * FROM COURSE;
SELECT * FROM STUD;
SELECT * FROM PROF;


--------------------------------------------------------------------------------



--★ 8. 프로시저 데이터 삽입 실행 ----------------------------------------------
--○ 프로시저로 데이터 입력

-- 1. ADMIN_ROLE (관리자등급)
-- EXEC PRC_AR_CUD(MODE, AR_CODE, AR_NAME)
EXEC PRC_AR_CUD('C','AR001','최종관리자');
EXEC PRC_AR_CUD('C','AR002','관리자');

SELECT * FROM ADMIN_ROLE;
--==>>
/*
AR001	최종관리자
AR002	관리자
*/

-- 2. CLASS (강의실)
-- EXEC PRC_CL_CUD(MODE, CL_CODE, CL_NAME)
EXEC PRC_CL_CUD('C','CL001','A강의실');
EXEC PRC_CL_CUD('C','CL002','B강의실');
EXEC PRC_CL_CUD('C','CL003','C강의실');

SELECT * FROM CLASS;
--==>>
/*
CL001	A강의실
CL002	B강의실
CL003	C강의실
*/


-- 3. DROP_REASON (탈락사유)
-- EXEC PRC_DR_CUD(MODE, DR_CODE, DR_REASON)
EXEC PRC_DR_CUD('C','DR001','개인사정');
EXEC PRC_DR_CUD('C','DR002','취업');
EXEC PRC_DR_CUD('C','DR003','무단결석');

SELECT * FROM DROP_REASON;
--==>>
/*
DR001	개인사정
DR002	취업
DR003	무단결석
*/


-- 4. TEXTBOOK (교재)
-- EXEC PRC_TB_CUD(MODE, TB_CODE, TB_NAME)
EXEC PRC_TB_CUD('C','TB001','Java 입문');
EXEC PRC_TB_CUD('C','TB002','Spring Boot 실습');
EXEC PRC_TB_CUD('C','TB003','SQL 기본');
EXEC PRC_TB_CUD('C','TB004','HTML CSS 가이드');
EXEC PRC_TB_CUD('C','TB005','JavaScript 핵심');
EXEC PRC_TB_CUD('C','TB006','React 실전');

SELECT * FROM TEXTBOOK;
--==>>
/*
TB001	Java 입문
TB002	Spring Boot 실습
TB003	SQL 기본
TB004	HTML CSS 가이드
TB005	JavaScript 핵심
TB006	React 실전
*/



-- 5. COURSE (과정)
-- EXEC PRC_CR_C(CR_CODE, CR_NAME)
EXEC PRC_CR_C('CR001','백엔드과정');
EXEC PRC_CR_C('CR002','프론트엔드과정');
EXEC PRC_CR_C('CR003','풀스택과정');

SELECT * FROM COURSE;
--==>>
/*
CR001	백엔드과정
CR002	프론트엔드과정
CR003	풀스택과정
*/

-- 6. SUB (과목)
-- EXEC PRC_SUB_CUD(MODE, SUB_CODE, SUB_NAME)
EXEC PRC_SUB_CUD('C','SUB001','Java');
EXEC PRC_SUB_CUD('C','SUB002','SQL');
EXEC PRC_SUB_CUD('C','SUB003','Spring');
EXEC PRC_SUB_CUD('C','SUB004','HTML/CSS');
EXEC PRC_SUB_CUD('C','SUB005','Javascript');
EXEC PRC_SUB_CUD('C','SUB006','React');

SELECT * FROM SUB;
--==>>
/*
SUB001	Java
SUB002	SQL
SUB003	Spring
SUB004	HTML/CSS
SUB005	Javascript
SUB006	React
*/


-- 7. PROF (교수자)
-- EXEC PRC_PF_C(PF_NAME, PF_SSN)
EXEC PRC_PF_C('박교수','800101-1234567');
EXEC PRC_PF_C('최교수','810202-2345678');
EXEC PRC_PF_C('김교수','880914-2122333');


--※ DEFAULT 날짜 수정 UPDATE
UPDATE PROF SET PF_DATE = TO_DATE('2024-01-10','YYYY-MM-DD') WHERE PF_ID = 'PF100';
UPDATE PROF SET PF_DATE = TO_DATE('2024-01-11','YYYY-MM-DD') WHERE PF_ID = 'PF101';
UPDATE PROF SET PF_DATE = TO_DATE('2024-01-12','YYYY-MM-DD') WHERE PF_ID = 'PF102';

SELECT * FROM PROF;
--==>>
/*
PF100	박교수	800101-1234567	1234567	2024-01-10
PF101	최교수	810202-2345678	2345678	2024-01-11
PF102	김교수	880914-2122333	2122333	2024-01-12
*/



-- 8. STUD (학생)
-- EXEC PRC_ST_C(ST_NAME,ST_SSN)
EXEC PRC_ST_C('김학생','000904-3123456');
EXEC PRC_ST_C('유학생','010101-4123456');
EXEC PRC_ST_C('박학생','970202-1123456');
EXEC PRC_ST_C('최학생','940515-1145677');
EXEC PRC_ST_C('정학생','990414-2233547');
EXEC PRC_ST_C('조학생','991124-1155111');

--※ DEFAULT 날짜 수정 UPDATE
UPDATE STUD SET ST_DATE = TO_DATE('2024-01-15','YYYY-MM-DD') WHERE ST_ID = 'ST100';
UPDATE STUD SET ST_DATE = TO_DATE('2024-01-16','YYYY-MM-DD') WHERE ST_ID = 'ST101';
UPDATE STUD SET ST_DATE = TO_DATE('2024-01-17','YYYY-MM-DD') WHERE ST_ID = 'ST102';
UPDATE STUD SET ST_DATE = TO_DATE('2025-01-05','YYYY-MM-DD') WHERE ST_ID = 'ST103';
UPDATE STUD SET ST_DATE = TO_DATE('2025-01-06','YYYY-MM-DD') WHERE ST_ID = 'ST104';
UPDATE STUD SET ST_DATE = TO_DATE('2025-01-07','YYYY-MM-DD') WHERE ST_ID = 'ST105';

SELECT * FROM STUD;
--==>>
/*
ST100	3123456	김학생	000904-3123456	2024-01-15
ST101	4123456	유학생	010101-4123456	2024-01-16
ST102	1123456	박학생	970202-1123456	2024-01-17
ST103	1145677	최학생	940515-1145677	2025-01-05
ST104	2233547	정학생	990414-2233547	2025-01-06
ST105	1155111	조학생	991124-1155111	2025-01-07
*/

-- 9. ADMIN (관리자)
-- EXEC PRC_AD_C(AD_NAME, AD_SSN, AR_CODE)
EXEC PRC_AD_C('조관리','790102-2777777','AR001');
EXEC PRC_AD_C('김관리','751010-1122333','AR002');
EXEC PRC_AD_C('이관리','890810-1552147','AR002');

--※ DEFAULT 날짜 수정 UPDATE
UPDATE ADMIN SET AD_DATE = TO_DATE('2023-01-01','YYYY-MM-DD') WHERE AD_ID = 'AD102';
UPDATE ADMIN SET AD_DATE = TO_DATE('2023-01-02','YYYY-MM-DD') WHERE AD_ID = 'AD103';
UPDATE ADMIN SET AD_DATE = TO_DATE('2024-01-03','YYYY-MM-DD') WHERE AD_ID = 'AD104';

SELECT * FROM ADMIN;
--==>>
/*
AD102	2777777	조관리	790102-2777777	2023-01-01	AR001
AD103	1122333	김관리	751010-1122333	2023-01-02	AR002
AD104	1552147	이관리	890810-1552147	2024-01-03	AR002
*/



-- 10. OPEN_COURSE (개설과정)
-- EXEC PRC_OC_C(CR_CODE, OC_SDATE, OC_EDATE, CL_CODE)
EXEC PRC_OC_C('CR001', TO_DATE('2024-09-01','YYYY-MM-DD'), TO_DATE('2025-02-28','YYYY-MM-DD'), 'CL001');
EXEC PRC_OC_C('CR002', TO_DATE('2025-09-01','YYYY-MM-DD'), TO_DATE('2026-02-28','YYYY-MM-DD'), 'CL002');
EXEC PRC_OC_C('CR003', TO_DATE('2026-03-01','YYYY-MM-DD'), TO_DATE('2026-08-31','YYYY-MM-DD'), 'CL003');


--※ DEFAULT 날짜 수정 UPDATE
UPDATE OPEN_COURSE SET OC_DATE = TO_DATE('2024-08-10','YYYY-MM-DD') WHERE OC_CODE = 'OC001';
UPDATE OPEN_COURSE SET OC_DATE = TO_DATE('2025-08-10','YYYY-MM-DD') WHERE OC_CODE = 'OC002';
UPDATE OPEN_COURSE SET OC_DATE = TO_DATE('2026-02-01','YYYY-MM-DD') WHERE OC_CODE = 'OC003';

SELECT * FROM OPEN_COURSE;
--==>>
/*
OC001	CR001	2024-09-01	2025-02-28	CL001	2024-08-10
OC002	CR002	2025-09-01	2026-02-28	CL002	2025-08-10
OC003	CR003	2026-03-01	2026-08-31	CL003	2026-02-01
*/




-- 11. OPEN_SUB (개설과목)
-- EXEC PRC_OS_C(OC_CODE, PF_ID, SUB_CODE, OS_SDATE, OS_EDATE, TB_CODE)

EXEC PRC_OS_C('OC001','PF101','SUB001', TO_DATE('2024-09-01','YYYY-MM-DD'), TO_DATE('2024-10-31','YYYY-MM-DD'), 'TB001');

EXEC PRC_OS_C('OC001','PF100','SUB002', TO_DATE('2024-11-01','YYYY-MM-DD'), TO_DATE('2024-12-31','YYYY-MM-DD'), 'TB003');

EXEC PRC_OS_C('OC001','PF100','SUB003', TO_DATE('2025-01-01','YYYY-MM-DD'), TO_DATE('2025-02-28','YYYY-MM-DD'), 'TB002');

EXEC PRC_OS_C('OC002','PF102','SUB004', TO_DATE('2025-09-01','YYYY-MM-DD'), TO_DATE('2025-10-31','YYYY-MM-DD'), 'TB004');

EXEC PRC_OS_C('OC002','PF102','SUB005', TO_DATE('2025-11-01','YYYY-MM-DD'), TO_DATE('2025-12-31','YYYY-MM-DD'), 'TB005');

EXEC PRC_OS_C('OC002','PF101','SUB006', TO_DATE('2026-01-01','YYYY-MM-DD'), TO_DATE('2026-02-28','YYYY-MM-DD'), 'TB006');

EXEC PRC_OS_C('OC003','PF101','SUB001', TO_DATE('2026-03-01','YYYY-MM-DD'), TO_DATE('2026-04-30','YYYY-MM-DD'), 'TB001');
 
EXEC PRC_OS_C('OC003','PF102','SUB005', TO_DATE('2026-05-01','YYYY-MM-DD'), TO_DATE('2026-06-30','YYYY-MM-DD'), 'TB005');

EXEC PRC_OS_C('OC003','PF100','SUB006', TO_DATE('2026-07-01','YYYY-MM-DD'), TO_DATE('2026-08-31','YYYY-MM-DD'), 'TB006');


--※ DEFAULT 날짜 수정 UPDATE
UPDATE OPEN_SUB SET OS_DATE = TO_DATE('2024-08-10','YYYY-MM-DD') WHERE OC_CODE = 'OC001';
UPDATE OPEN_SUB SET OS_DATE = TO_DATE('2025-08-10','YYYY-MM-DD') WHERE OC_CODE = 'OC002';
UPDATE OPEN_SUB SET OS_DATE = TO_DATE('2026-02-01','YYYY-MM-DD') WHERE OC_CODE = 'OC003';

SELECT * FROM OPEN_SUB;
--==>>
/*
OS002	OC001	PF101	SUB001	2024-09-01	2024-10-31	TB001				2024-08-10
OS003	OC001	PF100	SUB002	2024-11-01	2024-12-31	TB003				2024-08-10
OS004	OC001	PF100	SUB003	2025-01-01	2025-02-28	TB002				2024-08-10
OS005	OC002	PF102	SUB004	2025-09-01	2025-10-31	TB004				2025-08-10
OS006	OC002	PF102	SUB005	2025-11-01	2025-12-31	TB005				2025-08-10
OS007	OC002	PF101	SUB006	2026-01-01	2026-02-28	TB006				2025-08-10
OS008	OC003	PF101	SUB001	2026-03-01	2026-04-30	TB001				2026-02-01
OS009	OC003	PF102	SUB005	2026-05-01	2026-06-30	TB005				2026-02-01
OS010	OC003	PF100	SUB006	2026-07-01	2026-08-31	TB006				2026-02-01
*/



-- 12. ENROLLMENT (수강신청)

-- 과거 수강 이력은 INSERT쿼리로 바로 삽입
INSERT INTO ENROLLMENT VALUES ('ER001','OC001','ST100',TO_DATE('2024-08-20','YYYY-MM-DD'));
INSERT INTO ENROLLMENT VALUES ('ER002','OC001','ST101',TO_DATE('2024-08-21','YYYY-MM-DD'));
INSERT INTO ENROLLMENT VALUES ('ER003','OC001','ST102',TO_DATE('2024-08-22','YYYY-MM-DD'));
INSERT INTO ENROLLMENT VALUES ('ER004','OC002','ST103',TO_DATE('2025-08-20','YYYY-MM-DD'));
INSERT INTO ENROLLMENT VALUES ('ER005','OC002','ST104',TO_DATE('2025-08-21','YYYY-MM-DD'));
INSERT INTO ENROLLMENT VALUES ('ER006','OC002','ST105',TO_DATE('2025-08-22','YYYY-MM-DD'));



-- EXEC PRC_ER_C(OC_CODE, ST_ID)
EXEC PRC_ER_C('OC003','ST100');
EXEC PRC_ER_C('OC003','ST101');
EXEC PRC_ER_C('OC003','ST102');

SELECT * FROM ENROLLMENT;
--==>>
/*
ER001	OC001	ST100	2024-08-20
ER002	OC001	ST101	2024-08-21
ER003	OC001	ST102	2024-08-22
ER004	OC002	ST103	2025-08-20
ER005	OC002	ST104	2025-08-21
ER006	OC002	ST105	2025-08-22
ER007	OC003	ST100	2026-01-28
ER008	OC003	ST101	2026-01-28
ER009	OC003	ST102	2026-01-28
*/



-- 13. DROP_OUT (중도탈락)

-- 과거 이력은 INSERT 쿼리로 삽입
INSERT INTO DROP_OUT (DO_CODE, ER_CODE, DO_DATE, DR_CODE)
VALUES ('DO001','ER001',TO_DATE('2024-11-15','YYYY-MM-DD'),'DR001');
INSERT INTO DROP_OUT (DO_CODE, ER_CODE, DO_DATE, DR_CODE)
VALUES ('DO002','ER002',TO_DATE('2025-01-15','YYYY-MM-DD'),'DR002');

-- EXEC PRC_DO_C(ER_CODE, DO_DATE, DR_CODE)
EXEC PRC_DO_C('ER004', TO_DATE('2026-01-20','YYYY-MM-DD'), 'DR003');

SELECT * FROM DROP_OUT;
--==>>
/*
DO001	ER001	2024-11-15	DR001
DO002	ER002	2025-01-15	DR002
DO003	ER004	2026-01-20	DR003
*/


-- 14. GRADE (성적)
-- EXEC PRC_GR_C_AD(LOGIN_ID, ER_CODE, OS_CODE, ATT_SOCRE, WRT_SCORE, PRC_SCORE)
EXEC PRC_GR_C_AD('AD102','ER001','OS002',18,24,41);
EXEC PRC_GR_C_AD('AD102','ER002','OS002',20,26,45);
EXEC PRC_GR_C_AD('AD102','ER002','OS003',17,33,36);
EXEC PRC_GR_C_AD('AD102','ER004','OS005',18,32,34);
EXEC PRC_GR_C_AD('AD102','ER005','OS005',20,30,35);
EXEC PRC_GR_C_AD('AD102','ER006','OS005',16,28,33);
EXEC PRC_GR_C_AD('AD102','ER004','OS006',27,22,34);
EXEC PRC_GR_C_AD('AD102','ER005','OS006',30,20,35);
EXEC PRC_GR_C_AD('AD102','ER006','OS006',24,25,33);


UPDATE GRADE
SET GR_DATE = TO_DATE('2024-11-02','YYYY-MM-DD')
WHERE GR_CODE = 'GR001';
UPDATE GRADE
SET GR_DATE = TO_DATE('2024-12-15','YYYY-MM-DD')
WHERE GR_CODE = 'GR002';
UPDATE GRADE
SET GR_DATE = TO_DATE('2025-11-02','YYYY-MM-DD')
WHERE GR_CODE IN ('GR003','GR004','GR005');
UPDATE GRADE
SET GR_DATE = TO_DATE('2026-01-02','YYYY-MM-DD')
WHERE GR_CODE IN ('GR006','GR007','GR008');

UPDATE GRADE
SET GR_DATE = TO_DATE('2025-01-10','YYYY-MM-DD')
WHERE GR_CODE = 'GR003';

SELECT * FROM GRADE;
--==>>
/*
GR001	ER001	OS002	18	24	41	2024-11-02
GR002	ER002	OS002	20	26	45	2024-12-15
GR003	ER002	OS003	17	33	36	2025-01-10
GR004	ER004	OS005	18	32	34	2025-11-02
GR005	ER005	OS005	20	30	35	2025-11-02
GR006	ER006	OS005	16	28	33	2026-01-02
GR007	ER004	OS006	27	22	34	2026-01-02
GR008	ER005	OS006	30	20	35	2026-01-02
GR009	ER006	OS006	24	25	33	2026-01-28
*/

--------------------------------------------------------------------------------


